appId: dev.expo.updatese2e
onFlowStart:
  - runScript: ./maestroUpdatesApi.js
---
- evalScript:
    script:  ${output.api.serveManifest('test-update-basic', 'android')}
    label: Setup updates server to serve a basic update
- launchApp
- assertVisible:
    label: Assert embedded update is visible
    id: updateString
    text: test
- evalScript:
    script: ${output.api.delay(2000)}
    label: Delay for 2 seconds
- stopApp
- launchApp
- assertVisible:
    label: Assert downloaded update is visible
    id: updateString
    text: test-update-1
- stopApp
- evalScript:
    script:  ${output.api.stopUpdatesServer()}
    label: Stop server
